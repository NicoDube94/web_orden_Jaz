<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carga de cumpleaños</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Carga cada cumpleaños</h1>
  <h3>Agrega cada cumpleaños por separado en cada fecha:</h3>
  <a href="index.html"> <- Volver a la lista de cumpleaños</a>
  <form>
    <fieldset>
      <legend>Carga de Datos</legend>
      <label for="cumple">Fecha de Cumpleaños:</label>
      <input class="cambiar_tamanio" type="date" id="cumple" name="cumple" required>
      <br>
      <label for="Hora_inicio">Hora INICIO de Cumpleaños:</label><input class="cambiar_tamanio" type="time" id="Hora_inicio" name="Hora_inicio"></label>
      <br>
      <label for="Hora_fin">Hora FIN de Cumpleaños:</label><input class="cambiar_tamanio" type="time" id="Hora_fin" name="Hora_fin"></label>
      <input type="submit" value="Enviar">
  </fieldset>
  </form>
  <script type="module">
    const form = document.querySelector('form');
    let cumples=[]
    form.addEventListener('submit', (event) => {
      event.preventDefault();
      const cumple = document.getElementById('cumple').value;
      const Hora_inicio = document.getElementById('Hora_inicio').value;
      const Hora_fin = document.getElementById('Hora_fin').value;
      let dia = obtenerDiaSemana(cumple);
      const fechaFormateada = formatDate(cumple);
      let diccionario={dia:dia,cumple:fechaFormateada,Hora_inicio:Hora_inicio,Hora_fin:Hora_fin}
      cumples.push(diccionario)
      const archivoJSON = JSON.stringify(cumples,null,2);
      console.log(archivoJSON);
      localStorage.setItem(`cumples`,archivoJSON);
      form.appendChild(document.createElement('div')).innerHTML = `<p><b>${dia} ${fechaFormateada} ${Hora_inicio} ${Hora_fin}</b></p>`;
    });
    
    function obtenerDiaSemana(fechaString) {
      // Convertir la fecha de cadena de texto a un objeto Date
      const fecha = new Date(fechaString);

      // Array con los nombres de los días de la semana
      const diasSemana = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado','Domingo'];

      // Obtener el día de la semana (0 = Domingo, 1 = Lunes, ...)
      const diaSemana = fecha.getDay();

      // Retornar el nombre del día
      return diasSemana[diaSemana];
    }
    function formatDate(date){
      //parseamos el date para que sea un objeto Date
      const fecha = new Date(Date.parse(date));
      // Obtener los componentes de la fecha
      const dia = String(fecha.getDate()).padStart(2, '0'); // Agrega un 0 si el día tiene un solo dígito
      const mes = String(fecha.getMonth() + 1).padStart(2, '0'); // Los meses comienzan en 0, por lo que se suma 1
      const anio = fecha.getFullYear(); // Obtiene el año completo
      const diaN=parseInt(dia)
      // Formatear la fecha
      const dateFormat = `${diaN+1}-${mes}-${anio}`;
      return dateFormat; // Ejemplo: "30-03-2025"
    }
  </script>
</body>
</html>
